/* TOC - Construction de la table des matières */
 
<template match="//toc">
    <div class="tableofcontents" test="{select('count(ul)')}">
        <div class="title">Sommaire</div>
        {select('node()')}
    </div>
</template>

<template match="//toc//sect5">
    <li><a href="#{select('@id')}">{select('title/node()')}</a></li>
</template>

<template match="//toc//sect4">
    <li>
        <a href="#{select('@id')}">{select('title/node()')}</a>
        <ul test="{count(select('.//sect5'))}">{select('.//sect5')}
        </ul>
    </li>
</template>

<template match="//toc//sect3">
    <li>
        <a href="#{select('@id')}">{select('title/node()')}</a>
        <ul test="{count(select('.//sect4'))}">{select('.//sect4')}
        </ul>
    </li>
</template>

<template match="//toc//sect2">
    <li>
        <a href="#{select('@id')}">{select('title/node()')}</a>
        <ul test="{count(select('.//sect3'))}">{select('.//sect3')}
        </ul>
    </li>
</template>

<template match="//toc">
    <if test="{select('count(..//'.strtr(select('name(..)'),'1234','2345').')')}">
        <toc>
            <ul>{select('..//'.strtr(select('name(..)'),'1234','2345'))}</ul>
        </toc>
    </if>
</template>
