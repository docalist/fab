<template match="//groupname" group="" prefix="Méthodes">
    <switch test="$group">
        <case test="action">Actions de ce module</case>
        <case test="private">$prefix privées</case>
        <case test="protected">$prefix protégées</case>
        <case test="public">$prefix publiques</case>
        <default>$group ???</default>
    </switch>
</template>

<div test="{$errors and Config::get('show.errors')}" style="color: red; border: 1px solid red; background: yellow;">
    <p>Erreurs et problèmes rencontrés dans la documentation : </p>
    <ul>
        <loop on="$errors" as="$error">
            <li>$error</li>
        </loop>
    </ul>
</div>

<div class="sect1">
    <h1>Documentation {$class->isModule() ? 'du module' : 'de la classe'} {$class->name}</h1>

    <opt><p><strong>{$class->summary}</strong></p></opt>
    
    <if test="{$class->ancestors}">
        <div class="hierarchy">
            <span style="border: double #444; background: yellow; padding: 0.5em; font-weight: bold;">{$class->name}</span>
            <loop on="{$class->ancestors}" as="$ancestor">
                <code>&lt;---</code>
                <span style="border: 1px solid #444; background: #eee; padding: 0.5em;">
                    {AutoDoc::link($ancestor)}
                </span>
            </loop>
        </div>
    </if>
    
    {$class->description}

    <ul test="{$class->annotations}">
        <loop on="{$class->annotations}" as="$tag,$item">
            <loop on="$item" as="$doc">
                <li>@$tag {$doc->name} {$doc->shortDescription} {$doc->longDescription}</li>
            </loop>
        </loop>
    </ul>
    
    <form action="" style="border: 1px solid #008; background-color: #eee; padding: 0.5em; float: right; width: 10em;">
        Afficher : <br />
        <hidden name="class" value="{$class->name}" />
        <loop on="{$this->getFlags()}" as="$flag,$defaultValue">
            <checkbox name="$flag" value="true" label="$flag" checked="{Config::get('show.'.$flag) ? 'checked' : ''}"/> <br />
        </loop>
        <submit label="»»»" />
    </form>
             
    <div class="sect2" test="{$class->properties}">
        <h2>Propriétés</h2>
        <loop on="{$class->properties}" as="$group,$properties">
            <div class="sect3">
                <h3><groupname group="$group" prefix="Propriétés" /></h3>
                <dl>
                    <loop on="{$properties}" as="$property">
                        <dt>
                            <a href="#{$property->name}">{$property->name}</a>
                        </dt>
                        <dd>
                            {$property->summary}
                        </dd>
                    </loop>
                </dl>
            </div>
        </loop>
    </div>
    
    <div class="sect2" test="{$class->methods}">
        <h2>Méthodes</h2>
        <loop on="{$class->methods}" as="$group,$methods">
            <div class="sect3">
                <h3><groupname group="$group" /></h3>
                <dl>
                    <loop on="{$methods}" as="$method">
                        <dt>
                            <a href="#{$method->name}">{$method->name}</a>
                        </dt>
                        <dd>
                            {$method->summary}
                        </dd>
                    </loop>
                </dl>
            </div>
        </loop>
    </div>
    
    <if test="{$class->properties}">
        <loop on="{$class->properties}" as="$group,$properties">
            <hr />
            <groupname group="$group" prefix="Détail des propriétés" />
            <hr />
            <loop on="{$properties}" as="$property">
                <div class="sect2">
                    <h2><a name="{$property->name}" />{$property->name}</h2>
                    {$property->summary}{$property->description}
                    <ul test="{$property->annotations}">
                        <loop on="{$property->annotations}" as="$tag,$item">
                            <loop on="$item" as="$doc">
                                <li>@$tag {$doc->name} {$doc->shortDescription} {$doc->longDescription}</li>
                            </loop>
                        </loop>
                    </ul>
                </div>
            </loop>
        </loop>
    </if>

    <if test="{$class->methods}">
        <loop on="{$class->methods}" as="$group,$methods">
            <hr />
            <groupname group="$group" prefix="Détail des méthodes" />
            <hr />
            <loop on="{$methods}" as="$method">
                <div class="sect2">
                    <span test="{$method->inheritedFrom}" style="float: right">Héritée de {AutoDoc::link($method->inheritedFrom, $method->name)}</span>                    
                    <h2>
                        <a name="{$method->name}" />{$method->name}()
                    </h2>
                    
                    <div class="programlisting">{$method->signature}</div>
                    {$method->summary}{$method->description}
                    
                    <if test="{$method->parameters}">
                        <h4>Paramètres : </h4>
                        <ul>
                            <loop on="{$method->parameters}" as="$parameter">
                                <li>
                                    <p>
                                        <span class="var">{$parameter->name}</span>
                                        <span class="type">({$parameter->type}<if test="{!is_null($parameter->default)}">, optionnel</if>)</span>
                                        <opt> : {$parameter->summary}</opt>
                                    </p> 
                                    {$parameter->description}
                                </li>
                            </loop>
                        </ul>
                    </if>
                    
                    <if test="{$method->return}">
                        <h4>Valeur de retour: </h4>
                        <ul><li>
                        <p>
                            <span class="type">{$method->return->type}</span>
                            <opt>: {$method->return->summary}</opt>
                             </p>
                        {$method->return->description}
                        </li></ul>
                    </if>
                    
                    <ul test="{$method->annotations}">
                        <loop on="{$method->annotations}" as="$tag,$item">
                            <loop on="$item" as="$doc">
                                <li>@$tag {$doc->name} {$doc->shortDescription} {$doc->longDescription}</li>
                            </loop>
                        </loop>
                    </ul>
                </div>
            </loop>
        </loop>
    </if>
</div>
<p style="text-align: center; color: #888; border-top: 1px solid #888; font-size: 0.8em;">
    Documentation générée le {date('d/m/Y à H:i:s')}.
    Dernière modification le {date('d/m/Y à H:i:s', $class->lastModified)}.
</p>